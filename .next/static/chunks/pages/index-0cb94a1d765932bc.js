(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5405],{8312:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(7925)}])},2386:function(e,t,s){"use strict";s.d(t,{Z:function(){return components_Layout}});var a=s(5893),n=s(7294),i=s(1664),r=s.n(i),l=s(1163),c=s(3495),d=s(2237),o=s(4435),p=s(9633),u=s(1415),components_Sidebar=()=>{let e=(0,l.useRouter)(),[t,s]=(0,n.useState)(!0);return(0,a.jsxs)(c.E.div,{className:"bg-white h-full shadow-lg ".concat(t?"w-64":"w-20"),animate:{width:t?256:80},children:[(0,a.jsx)("div",{className:"p-4",children:(0,a.jsx)("h1",{className:"text-2xl font-bold ".concat(!t&&"hidden"),children:"CodeVault"})}),(0,a.jsxs)("nav",{className:"mt-8",children:[(0,a.jsxs)(r(),{href:"/",className:"flex items-center px-4 py-2 hover:bg-gray-100",children:[(0,a.jsx)(d.Z,{className:"h-6 w-6"}),t&&(0,a.jsx)("span",{className:"ml-4",children:"Dashboard"})]}),(0,a.jsxs)(r(),{href:"/snippets",className:"flex items-center px-4 py-2 hover:bg-gray-100",children:[(0,a.jsx)(o.Z,{className:"h-6 w-6"}),t&&(0,a.jsx)("span",{className:"ml-4",children:"Snippets"})]}),(0,a.jsxs)(r(),{href:"/search",className:"flex items-center px-4 py-2 hover:bg-gray-100",children:[(0,a.jsx)(p.Z,{className:"h-6 w-6"}),t&&(0,a.jsx)("span",{className:"ml-4",children:"Search"})]}),(0,a.jsxs)("button",{onClick:()=>{localStorage.removeItem("user"),e.push("/login")},className:"w-full flex items-center px-4 py-2 hover:bg-gray-100",children:[(0,a.jsx)(u.Z,{className:"h-6 w-6"}),t&&(0,a.jsx)("span",{className:"ml-4",children:"Logout"})]})]})]})},components_Layout=e=>{let{children:t}=e;return(0,a.jsxs)("div",{className:"flex h-screen bg-gray-100",children:[(0,a.jsx)(components_Sidebar,{}),(0,a.jsx)(c.E.main,{className:"flex-1 overflow-y-auto p-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:t})]})}},9548:function(e,t,s){"use strict";var a=s(5893),n=s(3495),i=s(8260),r=s(1664),l=s.n(r);t.Z=e=>{let{snippet:t,onDelete:s}=e;return(0,a.jsx)(n.E.div,{layout:!0,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-lg shadow-md overflow-hidden",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:t.title}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:(0,i.Z)(new Date(t.createdAt),"MMM d, yyyy")})]}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:t.language})}),(0,a.jsx)("div",{className:"mt-4 flex flex-wrap gap-2",children:t.tags.map(e=>(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:e},e))}),(0,a.jsxs)("div",{className:"mt-4 flex justify-end space-x-2",children:[(0,a.jsx)(l(),{href:"/snippet/".concat(t._id),className:"text-indigo-600 hover:text-indigo-500 text-sm font-medium",children:"View"}),(0,a.jsx)(l(),{href:"/snippet/edit/".concat(t._id),className:"text-green-600 hover:text-green-500 text-sm font-medium",children:"Edit"}),(0,a.jsx)("button",{onClick:()=>s(t._id),className:"text-red-600 hover:text-red-500 text-sm font-medium",children:"Delete"})]})]})})}},7925:function(e,t,s){"use strict";s.r(t);var a=s(5893),n=s(7294),i=s(1163),r=s(2386),l=s(9548),c=s(9500),d=s(1526);t.default=()=>{let e=(0,i.useRouter)(),[t,s]=(0,n.useState)([]),[o,p]=(0,n.useState)(!0),[u,h]=(0,n.useState)(null);(0,n.useEffect)(()=>{fetchSnippets()},[]);let fetchSnippets=async()=>{try{let e=await (0,c.$M)();s(e)}catch(s){var e,t;h((null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)||"Failed to load snippets")}finally{p(!1)}},handleDelete=async e=>{if(window.confirm("Are you sure you want to delete this snippet?"))try{await (0,c.rN)(e),s(t.filter(t=>t._id!==e))}catch(e){var a,n;h((null===(n=e.response)||void 0===n?void 0:null===(a=n.data)||void 0===a?void 0:a.message)||"Failed to delete snippet")}};return o?(0,a.jsx)("div",{children:"Loading..."}):(0,a.jsx)(r.Z,{children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"My Snippets"}),(0,a.jsx)("button",{onClick:()=>e.push("/snippet/create"),className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Create New Snippet"})]}),u&&(0,a.jsx)("div",{className:"mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:u}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:(0,a.jsx)(d.M,{children:t.map(e=>(0,a.jsx)(l.Z,{snippet:e,onDelete:handleDelete},e._id))})})]})})}},9500:function(e,t,s){"use strict";s.d(t,{$M:function(){return getSnippets},D:function(){return getSnippetById},JD:function(){return updateSnippet},V9:function(){return createSnippet},rN:function(){return deleteSnippet},uO:function(){return searchSnippets},x4:function(){return login},z2:function(){return register}});var a=s(7066);let n=a.Z.create({baseURL:"http://localhost:5000"});n.interceptors.request.use(e=>{let t=JSON.parse(localStorage.getItem("user")||"{}");return(null==t?void 0:t.token)&&(e.headers.Authorization="Bearer ".concat(t.token)),e});let login=async(e,t)=>{let s=await n.post("/api/auth/login",{email:e,password:t});return s.data},register=async(e,t,s)=>{let a=await n.post("/api/auth/register",{username:e,email:t,password:s});return a.data},createSnippet=async e=>{let t=await n.post("/api/snippets",e);return t.data},getSnippets=async()=>{let e=await fetch("/api/snippets");if(!e.ok)throw Error("Failed to fetch snippets");let t=await e.json();return console.log(t),t},getSnippetById=async e=>{let t=await fetch("/api/snippets/".concat(e));if(!t.ok)return null;let s=await t.json();return s},updateSnippet=async(e,t)=>{let s=await n.put("/api/snippets/".concat(e),t);return s.data},deleteSnippet=async e=>{let t=await n.delete("/api/snippets/".concat(e));return t.data},searchSnippets=async e=>{let t=await n.post("/api/snippets/search",{query:e});return t.data}}},function(e){e.O(0,[9774,9559,4141,2888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);