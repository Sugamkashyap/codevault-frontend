(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5680],{5696:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/snippet/[id]",function(){return a(1381)}])},2386:function(e,t,a){"use strict";a.d(t,{Z:function(){return components_Layout}});var n=a(5893),s=a(7294),i=a(1664),r=a.n(i),l=a(1163),c=a(3495),o=a(2237),p=a(4435),u=a(9633),d=a(1415),components_Sidebar=()=>{let e=(0,l.useRouter)(),[t,a]=(0,s.useState)(!0);return(0,n.jsxs)(c.E.div,{className:"bg-white h-full shadow-lg ".concat(t?"w-64":"w-20"),animate:{width:t?256:80},children:[(0,n.jsx)("div",{className:"p-4",children:(0,n.jsx)("h1",{className:"text-2xl font-bold ".concat(!t&&"hidden"),children:"CodeVault"})}),(0,n.jsxs)("nav",{className:"mt-8",children:[(0,n.jsxs)(r(),{href:"/",className:"flex items-center px-4 py-2 hover:bg-gray-100",children:[(0,n.jsx)(o.Z,{className:"h-6 w-6"}),t&&(0,n.jsx)("span",{className:"ml-4",children:"Dashboard"})]}),(0,n.jsxs)(r(),{href:"/snippets",className:"flex items-center px-4 py-2 hover:bg-gray-100",children:[(0,n.jsx)(p.Z,{className:"h-6 w-6"}),t&&(0,n.jsx)("span",{className:"ml-4",children:"Snippets"})]}),(0,n.jsxs)(r(),{href:"/search",className:"flex items-center px-4 py-2 hover:bg-gray-100",children:[(0,n.jsx)(u.Z,{className:"h-6 w-6"}),t&&(0,n.jsx)("span",{className:"ml-4",children:"Search"})]}),(0,n.jsxs)("button",{onClick:()=>{localStorage.removeItem("user"),e.push("/login")},className:"w-full flex items-center px-4 py-2 hover:bg-gray-100",children:[(0,n.jsx)(d.Z,{className:"h-6 w-6"}),t&&(0,n.jsx)("span",{className:"ml-4",children:"Logout"})]})]})]})},components_Layout=e=>{let{children:t}=e;return(0,n.jsxs)("div",{className:"flex h-screen bg-gray-100",children:[(0,n.jsx)(components_Sidebar,{}),(0,n.jsx)(c.E.main,{className:"flex-1 overflow-y-auto p-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:t})]})}},1381:function(e,t,a){"use strict";a.r(t);var n=a(5893),s=a(7294),i=a(1163),r=a(2386),l=a(9500),c=a(3495),o=a(7806),p=a(6538);t.default=()=>{let e=(0,i.useRouter)(),{id:t}=e.query,[a,u]=(0,s.useState)(null),[d,h]=(0,s.useState)(!0),[x,m]=(0,s.useState)(""),[f,g]=(0,s.useState)([]);return((0,s.useEffect)(()=>{let fetchSnippet=async()=>{if(t)try{let e=await (0,l.D)(t);u(e)}catch(t){var e,a;m((null===(a=t.response)||void 0===a?void 0:null===(e=a.data)||void 0===e?void 0:e.message)||"Failed to load snippet")}finally{h(!1)}};fetchSnippet()},[t]),(0,s.useEffect)(()=>{let loadExtension=async()=>{if(a){let e=p.M.find(e=>e.name.toLowerCase()===a.language.toLowerCase());if(e&&e.load)try{let t=await e.load();g([t])}catch(e){console.error("Error loading language support:",e),g([])}else g([])}};loadExtension()},[a]),d)?(0,n.jsx)("div",{children:"Loading..."}):x?(0,n.jsxs)("div",{children:["Error: ",x]}):a?(0,n.jsx)(r.Z,{children:(0,n.jsx)(c.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-4xl mx-auto",children:(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold mb-4",children:a.title}),(0,n.jsxs)("div",{className:"mb-4 flex items-center space-x-2",children:[(0,n.jsx)("span",{className:"px-2.5 py-0.5 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:a.language}),a.tags.map(e=>(0,n.jsx)("span",{className:"px-2.5 py-0.5 rounded-full text-sm font-medium bg-gray-100 text-gray-800",children:e},e))]}),(0,n.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,n.jsx)(o.ZP,{value:a.content,height:"400px",editable:!1,theme:"dark",extensions:f})})]})})}):(0,n.jsx)("div",{children:"Snippet not found"})}},9500:function(e,t,a){"use strict";a.d(t,{$M:function(){return getSnippets},D:function(){return getSnippetById},JD:function(){return updateSnippet},V9:function(){return createSnippet},rN:function(){return deleteSnippet},uO:function(){return searchSnippets},x4:function(){return login},z2:function(){return register}});var n=a(7066);let s=n.Z.create({baseURL:"http://localhost:5000"});s.interceptors.request.use(e=>{let t=JSON.parse(localStorage.getItem("user")||"{}");return(null==t?void 0:t.token)&&(e.headers.Authorization="Bearer ".concat(t.token)),e});let login=async(e,t)=>{let a=await s.post("/api/auth/login",{email:e,password:t});return a.data},register=async(e,t,a)=>{let n=await s.post("/api/auth/register",{username:e,email:t,password:a});return n.data},createSnippet=async e=>{let t=await s.post("/api/snippets",e);return t.data},getSnippets=async()=>{let e=await fetch("/api/snippets");if(!e.ok)throw Error("Failed to fetch snippets");let t=await e.json();return console.log(t),t},getSnippetById=async e=>{let t=await fetch("/api/snippets/".concat(e));if(!t.ok)return null;let a=await t.json();return a},updateSnippet=async(e,t)=>{let a=await s.put("/api/snippets/".concat(e),t);return a.data},deleteSnippet=async e=>{let t=await s.delete("/api/snippets/".concat(e));return t.data},searchSnippets=async e=>{let t=await s.post("/api/snippets/search",{query:e});return t.data}}},function(e){e.O(0,[9774,5762,9559,9464,2888,179],function(){return e(e.s=5696)}),_N_E=e.O()}]);