(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1114],{3418:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/snippet/create",function(){return a(4085)}])},2386:function(e,t,a){"use strict";a.d(t,{Z:function(){return components_Layout}});var n=a(5893),s=a(7294),i=a(1664),r=a.n(i),l=a(1163),o=a(3495),d=a(2237),c=a(4435),u=a(9633),p=a(1415),components_Sidebar=()=>{let e=(0,l.useRouter)(),[t,a]=(0,s.useState)(!0);return(0,n.jsxs)(o.E.div,{className:"bg-white h-full shadow-lg ".concat(t?"w-64":"w-20"),animate:{width:t?256:80},children:[(0,n.jsx)("div",{className:"p-4",children:(0,n.jsx)("h1",{className:"text-2xl font-bold ".concat(!t&&"hidden"),children:"CodeVault"})}),(0,n.jsxs)("nav",{className:"mt-8",children:[(0,n.jsxs)(r(),{href:"/",className:"flex items-center px-4 py-2 hover:bg-gray-100",children:[(0,n.jsx)(d.Z,{className:"h-6 w-6"}),t&&(0,n.jsx)("span",{className:"ml-4",children:"Dashboard"})]}),(0,n.jsxs)(r(),{href:"/snippets",className:"flex items-center px-4 py-2 hover:bg-gray-100",children:[(0,n.jsx)(c.Z,{className:"h-6 w-6"}),t&&(0,n.jsx)("span",{className:"ml-4",children:"Snippets"})]}),(0,n.jsxs)(r(),{href:"/search",className:"flex items-center px-4 py-2 hover:bg-gray-100",children:[(0,n.jsx)(u.Z,{className:"h-6 w-6"}),t&&(0,n.jsx)("span",{className:"ml-4",children:"Search"})]}),(0,n.jsxs)("button",{onClick:()=>{localStorage.removeItem("user"),e.push("/login")},className:"w-full flex items-center px-4 py-2 hover:bg-gray-100",children:[(0,n.jsx)(p.Z,{className:"h-6 w-6"}),t&&(0,n.jsx)("span",{className:"ml-4",children:"Logout"})]})]})]})},components_Layout=e=>{let{children:t}=e;return(0,n.jsxs)("div",{className:"flex h-screen bg-gray-100",children:[(0,n.jsx)(components_Sidebar,{}),(0,n.jsx)(o.E.main,{className:"flex-1 overflow-y-auto p-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:t})]})}},5783:function(e,t,a){"use strict";var n=a(5893),s=a(7294),i=a(7806),r=a(6538),l=a(3495);t.Z=e=>{let{initialData:t,onSubmit:a,isLoading:o}=e,[d,c]=(0,s.useState)({title:(null==t?void 0:t.title)||"",language:(null==t?void 0:t.language)||"javascript",content:(null==t?void 0:t.content)||"",tags:(null==t?void 0:t.tags)||[]}),[u,p]=(0,s.useState)(""),[m,g]=(0,s.useState)([]);(0,s.useEffect)(()=>{let loadExtension=async()=>{let e=r.M.find(e=>e.name.toLowerCase()===d.language.toLowerCase());if(e&&e.load)try{let t=await e.load();g([t])}catch(e){console.error("Error loading language support:",e),g([])}else g([])};loadExtension()},[d.language]);let handleAddTag=()=>{u&&!d.tags.includes(u)&&(c({...d,tags:[...d.tags,u]}),p(""))},handleRemoveTag=e=>{c({...d,tags:d.tags.filter(t=>t!==e)})};return(0,n.jsxs)(l.E.form,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",onSubmit:e=>{e.preventDefault(),a(d)},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Title"}),(0,n.jsx)("input",{type:"text",required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",value:d.title,onChange:e=>c({...d,title:e.target.value})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Language"}),(0,n.jsx)("select",{className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",value:d.language,onChange:e=>c({...d,language:e.target.value}),children:r.M.map(e=>(0,n.jsx)("option",{value:e.name.toLowerCase(),children:e.name},e.name))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Code"}),(0,n.jsx)("div",{className:"mt-1 border rounded-md overflow-hidden",children:(0,n.jsx)(i.ZP,{value:d.content,height:"200px",onChange:e=>c({...d,content:e}),theme:"dark",extensions:m})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Tags"}),(0,n.jsxs)("div",{className:"mt-1 flex items-center",children:[(0,n.jsx)("input",{type:"text",className:"flex-1 rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",value:u,onChange:e=>p(e.target.value),onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),handleAddTag())}),(0,n.jsx)("button",{type:"button",onClick:handleAddTag,className:"ml-2 px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700",children:"Add Tag"})]}),(0,n.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:d.tags.map(e=>(0,n.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800",children:[e,(0,n.jsx)("button",{type:"button",onClick:()=>handleRemoveTag(e),className:"ml-1 text-indigo-600 hover:text-indigo-500",children:"\xd7"})]},e))})]}),(0,n.jsx)("button",{type:"submit",disabled:o,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:o?"Saving...":t?"Update Snippet":"Create Snippet"})]})}},4085:function(e,t,a){"use strict";a.r(t);var n=a(5893),s=a(7294),i=a(1163),r=a(2386),l=a(5783),o=a(9500);t.default=()=>{let e=(0,i.useRouter)(),[t,a]=(0,s.useState)(!1),[d,c]=(0,s.useState)(""),handleCreate=async t=>{try{a(!0),c(""),await (0,o.V9)(t),e.push("/")}catch(e){var n,s;c((null===(s=e.response)||void 0===s?void 0:null===(n=s.data)||void 0===n?void 0:n.message)||"Failed to create snippet")}finally{a(!1)}};return(0,n.jsx)(r.Z,{children:(0,n.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Create New Snippet"}),d&&(0,n.jsx)("div",{className:"mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:d}),(0,n.jsx)(l.Z,{onSubmit:handleCreate,isLoading:t})]})})}},9500:function(e,t,a){"use strict";a.d(t,{$M:function(){return getSnippets},D:function(){return getSnippetById},JD:function(){return updateSnippet},V9:function(){return createSnippet},rN:function(){return deleteSnippet},uO:function(){return searchSnippets},x4:function(){return login},z2:function(){return register}});var n=a(7066);let s=n.Z.create({baseURL:"http://localhost:5000"});s.interceptors.request.use(e=>{let t=JSON.parse(localStorage.getItem("user")||"{}");return(null==t?void 0:t.token)&&(e.headers.Authorization="Bearer ".concat(t.token)),e});let login=async(e,t)=>{let a=await s.post("/api/auth/login",{email:e,password:t});return a.data},register=async(e,t,a)=>{let n=await s.post("/api/auth/register",{username:e,email:t,password:a});return n.data},createSnippet=async e=>{let t=await s.post("/api/snippets",e);return t.data},getSnippets=async()=>{let e=await fetch("/api/snippets");if(!e.ok)throw Error("Failed to fetch snippets");let t=await e.json();return console.log(t),t},getSnippetById=async e=>{let t=await fetch("/api/snippets/".concat(e));if(!t.ok)return null;let a=await t.json();return a},updateSnippet=async(e,t)=>{let a=await s.put("/api/snippets/".concat(e),t);return a.data},deleteSnippet=async e=>{let t=await s.delete("/api/snippets/".concat(e));return t.data},searchSnippets=async e=>{let t=await s.post("/api/snippets/search",{query:e});return t.data}}},function(e){e.O(0,[9774,5762,9559,9464,2888,179],function(){return e(e.s=3418)}),_N_E=e.O()}]);