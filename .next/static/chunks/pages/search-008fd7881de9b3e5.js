(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9603],{8266:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){return a(2653)}])},2386:function(e,t,a){"use strict";a.d(t,{Z:function(){return components_Layout}});var s=a(5893),n=a(7294),i=a(1664),r=a.n(i),l=a(1163),c=a(3495),d=a(2237),o=a(4435),p=a(9633),u=a(1415),components_Sidebar=()=>{let e=(0,l.useRouter)(),[t,a]=(0,n.useState)(!0);return(0,s.jsxs)(c.E.div,{className:"bg-white h-full shadow-lg ".concat(t?"w-64":"w-20"),animate:{width:t?256:80},children:[(0,s.jsx)("div",{className:"p-4",children:(0,s.jsx)("h1",{className:"text-2xl font-bold ".concat(!t&&"hidden"),children:"CodeVault"})}),(0,s.jsxs)("nav",{className:"mt-8",children:[(0,s.jsxs)(r(),{href:"/",className:"flex items-center px-4 py-2 hover:bg-gray-100",children:[(0,s.jsx)(d.Z,{className:"h-6 w-6"}),t&&(0,s.jsx)("span",{className:"ml-4",children:"Dashboard"})]}),(0,s.jsxs)(r(),{href:"/snippets",className:"flex items-center px-4 py-2 hover:bg-gray-100",children:[(0,s.jsx)(o.Z,{className:"h-6 w-6"}),t&&(0,s.jsx)("span",{className:"ml-4",children:"Snippets"})]}),(0,s.jsxs)(r(),{href:"/search",className:"flex items-center px-4 py-2 hover:bg-gray-100",children:[(0,s.jsx)(p.Z,{className:"h-6 w-6"}),t&&(0,s.jsx)("span",{className:"ml-4",children:"Search"})]}),(0,s.jsxs)("button",{onClick:()=>{localStorage.removeItem("user"),e.push("/login")},className:"w-full flex items-center px-4 py-2 hover:bg-gray-100",children:[(0,s.jsx)(u.Z,{className:"h-6 w-6"}),t&&(0,s.jsx)("span",{className:"ml-4",children:"Logout"})]})]})]})},components_Layout=e=>{let{children:t}=e;return(0,s.jsxs)("div",{className:"flex h-screen bg-gray-100",children:[(0,s.jsx)(components_Sidebar,{}),(0,s.jsx)(c.E.main,{className:"flex-1 overflow-y-auto p-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:t})]})}},9548:function(e,t,a){"use strict";var s=a(5893),n=a(3495),i=a(8260),r=a(1664),l=a.n(r);t.Z=e=>{let{snippet:t,onDelete:a}=e;return(0,s.jsx)(n.E.div,{layout:!0,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-lg shadow-md overflow-hidden",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:t.title}),(0,s.jsx)("span",{className:"text-sm text-gray-500",children:(0,i.Z)(new Date(t.createdAt),"MMM d, yyyy")})]}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:t.language})}),(0,s.jsx)("div",{className:"mt-4 flex flex-wrap gap-2",children:t.tags.map(e=>(0,s.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:e},e))}),(0,s.jsxs)("div",{className:"mt-4 flex justify-end space-x-2",children:[(0,s.jsx)(l(),{href:"/snippet/".concat(t._id),className:"text-indigo-600 hover:text-indigo-500 text-sm font-medium",children:"View"}),(0,s.jsx)(l(),{href:"/snippet/edit/".concat(t._id),className:"text-green-600 hover:text-green-500 text-sm font-medium",children:"Edit"}),(0,s.jsx)("button",{onClick:()=>a(t._id),className:"text-red-600 hover:text-red-500 text-sm font-medium",children:"Delete"})]})]})})}},2653:function(e,t,a){"use strict";a.r(t);var s=a(5893),n=a(7294),i=a(2386),r=a(9548),l=a(9500),c=a(1526);t.default=()=>{let[e,t]=(0,n.useState)(""),[a,d]=(0,n.useState)([]),[o,p]=(0,n.useState)(!1),[u,h]=(0,n.useState)(""),handleSearch=async t=>{if(t.preventDefault(),e.trim())try{p(!0),h("");let t=await (0,l.uO)(e);d(t)}catch(e){var a,s;h((null===(s=e.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.message)||"Failed to search snippets")}finally{p(!1)}},handleDelete=async e=>{if(window.confirm("Are you sure you want to delete this snippet?"))try{await (0,l.rN)(e),d(a.filter(t=>t._id!==e))}catch(e){var t,s;h((null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||"Failed to delete snippet")}};return(0,s.jsx)(i.Z,{children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Search Snippets"}),(0,s.jsx)("form",{onSubmit:handleSearch,className:"mb-8",children:(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"Search using natural language...",className:"flex-1 rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"}),(0,s.jsx)("button",{type:"submit",disabled:o,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50",children:o?"Searching...":"Search"})]})}),u&&(0,s.jsx)("div",{className:"mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:u}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:(0,s.jsx)(c.M,{children:a.map(e=>(0,s.jsx)(r.Z,{snippet:e,onDelete:handleDelete},e._id))})}),!o&&0===a.length&&(0,s.jsx)("div",{className:"text-center text-gray-500",children:"No snippets found. Try a different search query."})]})})}},9500:function(e,t,a){"use strict";a.d(t,{$M:function(){return getSnippets},D:function(){return getSnippetById},JD:function(){return updateSnippet},V9:function(){return createSnippet},rN:function(){return deleteSnippet},uO:function(){return searchSnippets},x4:function(){return login},z2:function(){return register}});var s=a(7066);let n=s.Z.create({baseURL:"http://localhost:5000"});n.interceptors.request.use(e=>{let t=JSON.parse(localStorage.getItem("user")||"{}");return(null==t?void 0:t.token)&&(e.headers.Authorization="Bearer ".concat(t.token)),e});let login=async(e,t)=>{let a=await n.post("/api/auth/login",{email:e,password:t});return a.data},register=async(e,t,a)=>{let s=await n.post("/api/auth/register",{username:e,email:t,password:a});return s.data},createSnippet=async e=>{let t=await n.post("/api/snippets",e);return t.data},getSnippets=async()=>{let e=await fetch("/api/snippets");if(!e.ok)throw Error("Failed to fetch snippets");let t=await e.json();return console.log(t),t},getSnippetById=async e=>{let t=await fetch("/api/snippets/".concat(e));if(!t.ok)return null;let a=await t.json();return a},updateSnippet=async(e,t)=>{let a=await n.put("/api/snippets/".concat(e),t);return a.data},deleteSnippet=async e=>{let t=await n.delete("/api/snippets/".concat(e));return t.data},searchSnippets=async e=>{let t=await n.post("/api/snippets/search",{query:e});return t.data}}},function(e){e.O(0,[9774,9559,4141,2888,179],function(){return e(e.s=8266)}),_N_E=e.O()}]);